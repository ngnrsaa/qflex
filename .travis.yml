language: cpp

python:
  - "3.5"

os:
  - osx

compiler:
  - clang

services:
  - docker

before_install:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew update            ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install coreutils ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install gsl       ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install autoconf  ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install libomp    ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install pybind11  ; fi

before_script:
  - docker run -ti --rm -v $PWD:/qflex:ro alpine:3.10.3 /bin/sh -c "apk update && apk add bash py3-pip clang && pip3 install yapf && bash /qflex/scripts/check_format.sh"

## script:
##   - docker run -ti --rm qflex-tests:latest
##   - docker run -ti --rm qflex-py-tests:latest
##   - docker run -ti --rm qflex:latest /qflex/config/circuits/bristlecone_48_1-24-1_0.txt /qflex/config/ordering/bristlecone_48.txt /qflex/config/grid/bristlecone_48.txt
